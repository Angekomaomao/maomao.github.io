# 📝 留言板 - 跨设备同步版本

一个美观、现代化的留言板应用，支持**多设备实时同步**！

![版本](https://img.shields.io/badge/版本-2.0-blue)
![状态](https://img.shields.io/badge/状态-可用-green)

---

## ✨ 特性

### 🎨 核心功能
- ✅ **便利贴式留言** - 可拖拽、展开、收起
- 📁 **文件夹管理** - 支持创建、重命名、删除
- 🔒 **密码保护** - 可为文件夹设置密码
- 🖼️ **图片上传** - 支持图片留言（最大5MB）
- 💬 **评论功能** - 每条留言可添加评论
- 🌈 **多彩主题** - 6种便利贴颜色随机分配

### 🔄 新特性（v2.0）
- 🌐 **跨设备同步** - 移动端和PC端数据实时同步
- 🚀 **后端存储** - 使用服务器存储替代本地存储
- 📱 **响应式设计** - 完美支持手机和平板
- ⚡ **即时更新** - 所有操作立即同步到服务器

---

## 🚀 快速开始

### 方式1: 一键启动（Windows）
```bash
# 双击运行
start.bat
```

### 方式2: 命令行启动
```bash
# 1. 安装依赖
npm install

# 2. 启动服务器
npm start
# 或
node server.js
```

### 方式3: 开发模式
```bash
npm run dev
```

---

## 📱 访问方式

### 本地访问
```
http://localhost:3000
```

### 局域网访问（手机/平板）
```
http://你的IP地址:3000

例如: http://192.168.1.100:3000
```

💡 **提示**: 运行 `start.bat` 会自动显示你的IP地址

---

## 📂 项目结构

```
留言web/
├── server.js              # 后端服务器
├── package.json           # 项目配置
├── start.bat             # Windows 启动脚本
├── 留言web/
│   ├── index.html        # 前端页面
│   ├── script.js         # 前端脚本（已改为API调用）
│   ├── style.css         # 样式文件
│   ├── data.json         # 数据存储文件
│   └── background.jpg    # 背景图片
├── 启动说明.md           # 详细启动说明
├── 快速测试.md           # 测试指南
└── 部署到云服务器.md     # 部署指南
```

---

## 🔧 技术栈

### 前端
- HTML5
- CSS3 (响应式设计)
- Vanilla JavaScript (ES6+)
- Fetch API

### 后端
- Node.js
- Express 5.x
- CORS
- File System (JSON存储)

---

## 📖 使用文档

### 基础操作
1. **发送留言**: 在输入框输入内容，点击"发布留言"
2. **上传图片**: 点击"上传本地图片"选择图片
3. **创建文件夹**: 点击"+ 新建文件夹"
4. **拖拽留言**: 鼠标按住留言可拖动
5. **展开留言**: 点击小便利贴展开查看完整内容
6. **添加评论**: 在留言底部输入框添加评论

### 高级功能
- **密码文件夹**: 创建文件夹时可设置密码保护
- **公开留言**: 在私密文件夹中点击📤按钮可将留言移到公开文件夹
- **文件夹管理**: 鼠标悬停在文件夹上显示重命名和删除按钮

---

## 🌐 部署到公网

### 推荐平台
1. **Vercel** - 最简单，一键部署
2. **Railway** - 自动化部署
3. **Render** - 免费计划

详细步骤见：[部署到云服务器.md](./部署到云服务器.md)

---

## 🔒 数据安全

- 数据保存在 `留言web/data.json`
- **建议定期备份此文件**
- 可以手动编辑此文件（JSON格式）
- 密码以明文存储（建议后续升级为加密）

---

## 📊 API 文档

### 获取所有数据
```
GET /api/data
```

### 保存所有数据
```
POST /api/data
Body: { messages: [], folders: [] }
```

### 添加留言
```
POST /api/messages
Body: { id, text, image, time, color, folderId, ... }
```

### 删除留言
```
DELETE /api/messages/:id
```

### 更新留言
```
PUT /api/messages/:id
Body: { ...更新的字段 }
```

### 文件夹操作
```
POST /api/folders        # 添加
DELETE /api/folders/:id  # 删除
PUT /api/folders/:id     # 更新
```

---

## 🐛 故障排除

### 问题1: 启动失败
**检查项**:
- Node.js 是否安装: `node -v`
- 依赖是否安装: `npm install`
- 端口3000是否被占用

### 问题2: 手机无法访问
**解决方案**:
- 确认手机和电脑在同一WiFi
- 检查防火墙设置
- 使用 `ipconfig` 确认IP地址

### 问题3: 数据丢失
**解决方案**:
- 检查 `data.json` 文件权限
- 查看服务器日志
- 从备份恢复数据

---

## 📝 更新日志

### v2.0 (2026-01-06)
- ✨ 新增后端服务器，支持跨设备同步
- 🔄 替换 localStorage 为 API 调用
- 📱 优化移动端显示
- 🚀 添加一键启动脚本

### v1.0
- 🎉 初始版本
- 基础留言功能
- 文件夹管理
- 本地存储

---

## 🤝 贡献

欢迎提出建议和问题！

---

## 📄 许可证

MIT License

---

## 💡 未来计划

- [ ] 用户系统和登录功能
- [ ] 实时聊天功能（WebSocket）
- [ ] 数据库集成（MongoDB/PostgreSQL）
- [ ] 留言点赞和标签功能
- [ ] 导出数据功能
- [ ] 主题自定义
- [ ] 多语言支持

---

**享受使用留言板的乐趣！** 🎉

有问题？查看 [启动说明.md](./启动说明.md) 或 [快速测试.md](./快速测试.md)
